meta:
  name: "External API request [EXPERIMENTAL]."
  description: "
  POC example of an payload allowing external API requests.


  NOTE:

  This example is *experimental* and requires providers running yagna 0.12
  with a specific certificate chain added to their keystores.
  "
  author: "Golem Factory"
  image: "https://placekitten.com/350/250"
payloads:
  external-api-request:
    runtime: "vm/manifest"
    params:
      manifest: "ewogICJ2ZXJzaW9uIjogIjAuMS4wIiwKICAiY3JlYXRlZEF0IjogIjIwMjItMDctMjZUMTI6NTE6MDAuMDAwMDAwWiIsCiAgImV4cGlyZXNBdCI6ICIyMTAwLTAxLTAxVDAwOjAxOjAwLjAwMDAwMFoiLAogICJtZXRhZGF0YSI6IHsKICAgICJuYW1lIjogIkV4dGVybmFsIEFQSSBjYWxsIGV4YW1wbGUiLAogICAgImRlc2NyaXB0aW9uIjogIkV4YW1wbGUgbWFuaWZlc3Qgb2YgYSBzZXJ2aWNlIG1ha2luZyBhbiBvdXRib3VuZCBjYWxsIHRvIHRoZSBleHRlcm5hbCBBUEkiLAogICAgInZlcnNpb24iOiAiMC4xLjAiCiAgfSwKICAicGF5bG9hZCI6IFsKICAgIHsKICAgICAgInBsYXRmb3JtIjogewogICAgICAgICJhcmNoIjogIng4Nl82NCIsCiAgICAgICAgIm9zIjogImxpbnV4IgogICAgICB9LAogICAgICAidXJscyI6IFsKICAgICAgICAiaHR0cDovL3lhY24yLmRldi5nb2xlbS5uZXR3b3JrOjgwMDAvZG9ja2VyLWdvbGVtLXNjcmlwdC1jdXJsLWxhdGVzdC1kNzUyNjhlNzUyLmd2bWkiCiAgICAgIF0sCiAgICAgICJoYXNoIjogInNoYTM6ZTVmNWRkZmQ2NDk1MjVkYmUyNWQ5M2Q5ZWQ1MWQxYmRkMDg0OTkzM2Q5YTU3MjBhZGI0YjU4MTAiCiAgICB9CiAgXSwKICAiY29tcE1hbmlmZXN0IjogewogICAgInZlcnNpb24iOiAiMC4xLjAiLAogICAgInNjcmlwdCI6IHsKICAgICAgImNvbW1hbmRzIjogWwogICAgICAgICJydW4gLipjdXJsLioiLAogICAgICAgICJydW4gLipyZXF1ZXN0LnNoLioiLAogICAgICAgICJ0cmFuc2ZlciAuKm91dHB1dC50eHQiCiAgICAgIF0sCiAgICAgICJtYXRjaCI6ICJyZWdleCIKICAgIH0sCiAgICAibmV0IjogewogICAgICAiaW5ldCI6IHsKICAgICAgICAib3V0IjogewogICAgICAgICAgInByb3RvY29scyI6IFsiaHR0cHMiXSwKICAgICAgICAgICJ1cmxzIjogWyJodHRwczovL2FwaS5jb2luZ2Vja28uY29tIiwgImh0dHBzOi8vaHR0cGJpbi5vcmciXQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQo="
      manifest_cert: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU2RENDQTlDZ0F3SUJBZ0lDRUFBd0RRWUpLb1pJaHZjTkFRRUxCUUF3Z1lNeEN6QUpCZ05WQkFZVEFsQk0KTVJNd0VRWURWUVFJREFwTllXeHZjRzlzYzJ0aE1ROHdEUVlEVlFRS0RBWkdiMjhnUTI4eEZUQVRCZ05WQkFzTQpERVp2YnlCSmJuUmxjaUJJVVRFU01CQUdBMVVFQXd3SlJtOXZJRWx1ZEdWeU1TTXdJUVlKS29aSWh2Y05BUWtCCkZoUnZabVpwWTJWQWFXNTBaWEl1Wm05dkxtTnZiVEFnRncweU1qQTRNVEF4TWpBMU1qSmFHQTh5TVRJeU1EY3gKTnpFeU1EVXlNbG93Z1k4eEN6QUpCZ05WQkFZVEFrTmFNUkF3RGdZRFZRUUlEQWRDYjJobGJXbGhNUTh3RFFZRApWUVFIREFaUWNtRm5kV1V4RXpBUkJnTlZCQW9NQ2tadmJ5QlNaWEVnUTI4eEV6QVJCZ05WQkFzTUNrWnZieUJTClpYRWdTRkV4RURBT0JnTlZCQU1NQjBadmJ5QlNaWEV4SVRBZkJna3Foa2lHOXcwQkNRRVdFbTltWm1salpVQnkKWlhFdVptOXZMbU52YlRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTmJFdTNBUgoxVjdjTnUxejFOL0NxUWE3d2ZrUmZ0TUl3RGo4WTIyQ0lpNm04N0lBN3NtRTRWNHhNZUFrSjBHS3RPMldaSW5tCnJOVkRKUG9ldXFjS1YrdGszd0xTdFg4dXQyTmw4dS8rMUNyVHRyV0I1Wi9ONk82NzAxdlVVMzc1RFdWeXJHK2gKWjl6Y21iTFZBZGkvYXpCdVVXYnFjVS9ObnhCeUpPRnlXWEJQTXBCR0tBY09KVGduaVFRMk5ZVVJXaDVmclVvMAp3MXh3Z3ZpWms1OTZrSG8xdDU3a2t4M3E5ZVJ4eWdwS21uS21NZ1I5cFlrOFpTWnJPdFcrYzVheUVhdTJUbVNRCmorT0E5WnUzRWM5M0l5UzRiSWJINlFDaG1CMEkrYWk4VTk3SExhUjBVZUVHZWVpUVo5bktseUltT3lJcHV2dXcKUGV2ckdYZnFVRGhlVGNVQ0F3RUFBYU9DQVZRd2dnRlFNQWtHQTFVZEV3UUNNQUF3RVFZSllJWklBWWI0UWdFQgpCQVFEQWdaQU1ETUdDV0NHU0FHRytFSUJEUVFtRmlSUGNHVnVVMU5NSUVkbGJtVnlZWFJsWkNCVFpYSjJaWElnClEyVnlkR2xtYVdOaGRHVXdIUVlEVlIwT0JCWUVGS0l1RkkrVHBTWUhzaXQ5bUhxY3pMOGExMitnTUlHMkJnTlYKSFNNRWdhNHdnYXVBRlBDUytmMWNpWUlzV24vdEI4eEZZa0xjZ1N2SW9ZR09wSUdMTUlHSU1Rc3dDUVlEVlFRRwpFd0pRVERFVE1CRUdBMVVFQ0F3S1RXRnNiM0J2YkhOcllURVBNQTBHQTFVRUJ3d0dTM0poYTI5M01ROHdEUVlEClZRUUtEQVpHYjI4Z1EyOHhFakFRQmdOVkJBc01DVVp2YnlCRGJ5QklVVEVQTUEwR0ExVUVBd3dHUm05dklFTnYKTVIwd0d3WUpLb1pJaHZjTkFRa0JGZzV2Wm1acFkyVkFabTl2TG1OdmJZSUNFQUF3RGdZRFZSMFBBUUgvQkFRRApBZ1dnTUJNR0ExVWRKUVFNTUFvR0NDc0dBUVVGQndNQk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQ0toL2hlCk5IbEZQeXZXWlpYNDhlQ2Q1NEZGQ3NrNHpuUitvQlkxYVcxancrN0FGcUt4cUVmZWNkSlIrdUMrczBLVmNhUlEKWjZGcTUwaWNURUs3K1RmNHM0TGMvLytOSi92UEIxd1ZrNW1Rd3Zyb1RTcWZuOXRDdWNFL3gwa0FJSS80QmpZegpKUUNyZnlyVWlDbVBoME1vQTZ3Q0RiNlpMQ0M3TlFmVkFuN2RZNHVvWjNObDR3TW9IOGpSVWhYaHRKNjcwT3pGClpCc2lzSHBKS3RSaWJkOUNvY3I0dHdvTUFNbndpL3k0NWY4SC8yVm9FdnNKdzBDY00wK3FQUWVqSmNyMXh5TVAKMWZMQmNNTHlpeGNQNWYxLzlzWVRhQWN6TkU0eU1ReE9DS2hnZnBXcGE1Y2hVU2F6R2RnalBmNERaL0FSQSswWAowMmMrdGhMVStXMUdkbUhTCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"
      manifest_sig: "mHzoxwa1CZgIWBeHauoUKZPvTuifVVS4CNGI6/Lqf2jErYNUs+RxVZZ7KSmaahjmXRdTwzbO15r1PFGbbVaCmywZ45EENRi57gzyD1654Z8YRsz/paEjFWQkGmIkAFTwUlZQ7xwTp26yCusKtmIn6jnDXQXNvTaCUQgQ2Hyaz0Fva7r+pT3YW1nufeG9enY650UIuamltrzOwXrqE6tOFDUgk5b0u60nUwkC2vmVqjCynKR+0Tp5GDpv560GHIvHbdBC4SZnPDpmgAo642sQ/27Gh54XlIHrK+fFN0q+y5ACbALuARL5BtTJoKnJGpAGs31Oq5xPcTftDWV70GKiqA=="
      manifest_sig_algorithm: "sha256"
      capabilities:
        - inet
        - manifest-support
nodes:
  external-api-request:
    payload: "external-api-request"
    init:
      -
        - "/bin/sh"
        - "-c"
        - "GOLEM_PRICE=`curl --silent -X 'GET'
        'https://api.coingecko.com/api/v3/simple/price?ids=golem&vs_currencies=usd'
        -H 'accept: application/json' | jq .golem.usd`;
        echo \"Golem price: $GOLEM_PRICE USD\";
        "
